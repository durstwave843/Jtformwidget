<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>

    <!-- 1) Load the Widget API -->
    <script src="https://js.jotform.com/JotFormCustomWidget.min.js"></script>

    <script>
      console.log("ðŸ widget HTML loaded");

      JFCustomWidget.subscribe("ready", () => {
        console.log("ðŸ”” widget ready fired");

        // show that we're alive
        document.getElementById("status").textContent = "Working";

        // ---- 1ï¸âƒ£ Try the official listener ----
        // Make sure this name matches exactly your question's Unique Name
        const fieldName = "typeA";  
        JFCustomWidget.listenFromField(fieldName, "change", (value) => {
          console.log("âœ… listenFromField:", value);
        });

        // ---- 2ï¸âƒ£ Fallback: Poll every second ----
        setInterval(() => {
          JFCustomWidget.getFieldsValueByName(fieldName, (vals) => {
            console.log("â± polling getFieldsValueByName:", vals);
          });
        }, 1000);
      });

      JFCustomWidget.subscribe("submit", () => {
        console.log("ðŸ”” widget submit fired");
        JFCustomWidget.sendSubmit({
          valid: true,
          value: ""
        });
      });
    </script>
  </head>

  <body style="font-family: sans-serif; padding: 12px;">
    <div id="status">Loadingâ€¦</div>
  </body>
</html>
